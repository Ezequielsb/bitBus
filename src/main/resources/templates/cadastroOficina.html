<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout}">
<head>
<title>Cadastro de Oficinas</title>
</head>
<body layout:fragment="body">
	<main>
		<section class="container-fluid d-flex justify-content-center"
			style="max-width: 500px;">
			<form id="cadastroForm" action="/cadastroOficina" th:object="${oficina}" method="post">
				
				<label for="titulo" class="form-label">Título</label>
				<input type="text" class="form-control" id="titulo" name="titulo"/>
				
				<label for="ministrante" class="form-label">Ministrante</label>
				<input type="text" class="form-control" id="ministrante" name="ministrante"/>
				
				<label for="data" class="form-label">Data</label>
				<input type="date" class="form-control" id="data" name="data"/>
				
				<label for="horario" class="form-label">Horário</label>
				<input type="time" class="form-control" id="horario" name="horario"/>
				
				<label for="duracao" class="form-label">Duração</label>
				<input type="text" class="form-control" id="duracao" name="duracao"/>
				
				<label for="local" class="form-label">Local</label>
				<input type="text" class="form-control" id="local" name="local"/>
				
				<label for="curriculoPalestrante" class="form-label">Currículo Ministrante</label>
				<input type="text" class="form-control" id="curriculoPalestrante" name="curriculoPalestrante" style="width: 100%;"/>
				
				<label for="resumoPalestra" class="form-label">Resumo Palestra</label>
				<input type="text" class="form-control" id="resumoPalestra" name="resumoPalestra" style="width: 100%;"/>
						
				<br/><br/>
				<center>
					<button type="submit" class="btn btn-primary">Enviar</button>
				</center>
			</form>
		</section>
	</main>
	
		<script>
	document.addEventListener('DOMContentLoaded', function() {
	    var form = document.getElementById('cadastroForm');

	    form.addEventListener('submit', function(event) {
	        event.preventDefault();
	        
	        var formData = new FormData(form);
	        
	        fetch(form.action, {
	            method: 'POST',
	            body: formData
	        })
	        .then(function(response) {
	            return response.json(); // Parse da resposta como JSON
	        })
	        .then(function(data) {
	            if (data.status === 'success') {
	            	alert("Oficina cadastrada com sucesso!");
	                // Limpar o formulário
	                form.reset();
	            } else {
	                // Exibir alerta de erro
	                alert(data.message);
	            }
	        })
	        .catch(function(error) {
	            // Exibir alerta de erro genérico
	           alert("Erro ao processar a solicitação!");
	        });
	    });
	});
	</script>
</body>
</html>